<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>登录界面</title>
	<link rel="stylesheet" href="css/Reset.css">
	<link rel="stylesheet" href="css/register.css">
</head>
<body>
	<div id="wrap">
		<div id="enter_top">
			<a href="index.html" class="enter_delete">
				<!-- <embed src="../css/x.svg" width="20%" height="20%" /> -->
			</a>
			<a href="###" class="enter_in">用户</a>
			<a href="login.html" class="login_in">注册</a>
		</div>
		<div id="enter_conten">
			<form action="" method="">
				<input type="text" class="name" placeholder="请输入用户名">
				<input type="password" class="password" placeholder="请输入密码">
				<a href="###" class="remable">忘记密码?</a>
				<input type="button" value="登录" class="btn" >
				<div class="name_img"></div>
				<div class="password_img"></div>
			</form>
		</div>
	</div>
</body>
<script type="text/javascript" src="js/jquery-3.1.0.min.js"></script>
<script type="text/javascript">
	//用户名
	var $text = $(".name").eq(0);
	var inputa = document.getElementsByTagName('input');
	console.log(inputa);

	// 添加按钮事件
	// 发送请求
	inputa[2].onclick = function(){
		//获取用户名
		var numeVal = inputa[0].value;
		var pwdVal = inputa[1].value;
		console.log(numeVal);
		var xmlhttp = null;
		// 创建对象
		if(XMLHttpRequest){
			xmlhttp = new XMLHttpRequest();
		}else{
			xmlhttp = ActiveXObject("Microsoft.XMLHTTP");
		}


		// -------111111-------------------
		//读取php文件
		xmlhttp.open("POST", "PHP/user.php", true);

		// -------222222-------------------
		//？？？？？
		xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');

		// -------333333-------------------
		//发送请求
		xmlhttp.send("username="+numeVal+"&pwd="+pwdVal);


			// 服务器响应
			xmlhttp.onreadystatechange = function(){
				// 判断状态吗
				if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
					// 接受数据
					var data = xmlhttp.responseText;

					console.log(data);

					// -------逻辑操作-------------
					// 转化成json格式数据
					var json = JSON.parse(data);
					if(json.error == 0){
						alert('登录成功');
						window.location.href = "list_usr.html";
					}else{
						alert('账号密码错误');
					}
				}
			}

}

</script>
</html>









